{"ast":null,"code":"import _asyncToGenerator from\"/Users/warrenmason/Downloads/Final Versions/Avalanche/BSC-Moonwalker-Swap-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/warrenmason/Downloads/Final Versions/Avalanche/BSC-Moonwalker-Swap-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/warrenmason/Downloads/Final Versions/Avalanche/BSC-Moonwalker-Swap-main/node_modules/@babel/runtime/regenerator/index.js\";import{useEffect,useState,useCallback}from'react';import BigNumber from'bignumber.js';import SolarV2LPABI from'../constants/abis/SolarV2LP.json';import{getWeb3NoAccount}from'../utils/web3';import useBlock from'./useBlocks';var web3=getWeb3NoAccount();var AvaxUSDTPairAddress='0x3fb0087842b7ebd57be8024aaf32cc6a390c13d5';var AvaxUsdtPairContract=new web3.eth.Contract(SolarV2LPABI,AvaxUSDTPairAddress);var SolarAvaxPairAddress='0x3fb0087842b7ebd57be8024aaf32cc6a390c13d5';var SolarAvaxPairContract=new web3.eth.Contract(SolarV2LPABI,SolarAvaxPairAddress);var useAvaxPrice=function useAvaxPrice(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),price=_useState2[0],setPrice=_useState2[1];var block=useBlock();var fetchBalance=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var avaxObj,avaxPrice,solarObj,solarPrice;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return AvaxUsdtPairContract.methods.getReserves().call();case 3:avaxObj=_context.sent;if(new BigNumber(avaxObj._reserve1).eq(new BigNumber(0))){_context.next=10;break;}avaxPrice=new BigNumber(avaxObj._reserve0).div(avaxObj._reserve1).times(1e12);_context.next=8;return SolarAvaxPairContract.methods.getReserves().call();case 8:solarObj=_context.sent;if(!new BigNumber(solarObj._reserve1).eq(new BigNumber(0))){solarPrice=new BigNumber(solarObj._reserve0).div(solarObj._reserve1).times(avaxPrice);if(!avaxPrice.isEqualTo(price)){setPrice(avaxPrice.toNumber());}}case 10:_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);setPrice(0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);})),[price]);useEffect(function(){if(AvaxUsdtPairContract&&SolarAvaxPairContract){fetchBalance();}},[setPrice,fetchBalance,block]);return price;};export default useAvaxPrice;","map":{"version":3,"sources":["/Users/warrenmason/Downloads/Final Versions/Avalanche/BSC-Moonwalker-Swap-main/src/hooks/useAvaxPrice.ts"],"names":["useEffect","useState","useCallback","BigNumber","SolarV2LPABI","getWeb3NoAccount","useBlock","web3","AvaxUSDTPairAddress","AvaxUsdtPairContract","eth","Contract","SolarAvaxPairAddress","SolarAvaxPairContract","useAvaxPrice","price","setPrice","block","fetchBalance","methods","getReserves","call","avaxObj","_reserve1","eq","avaxPrice","_reserve0","div","times","solarObj","solarPrice","isEqualTo","toNumber"],"mappings":"+eAAA,OAASA,SAAT,CAAoBC,QAApB,CAA8BC,WAA9B,KAAiD,OAAjD,CAEA,MAAOC,CAAAA,SAAP,KAAsB,cAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,kCAAzB,CACA,OAASC,gBAAT,KAAiC,eAAjC,CACA,MAAOC,CAAAA,QAAP,KAAqB,aAArB,CAEA,GAAMC,CAAAA,IAAI,CAAGF,gBAAgB,EAA7B,CACA,GAAMG,CAAAA,mBAAmB,CAAG,4CAA5B,CACA,GAAMC,CAAAA,oBAAoB,CAAG,GAAIF,CAAAA,IAAI,CAACG,GAAL,CAASC,QAAb,CAAsBP,YAAtB,CAA0DI,mBAA1D,CAA7B,CAEA,GAAMI,CAAAA,oBAAoB,CAAG,4CAA7B,CACA,GAAMC,CAAAA,qBAAqB,CAAG,GAAIN,CAAAA,IAAI,CAACG,GAAL,CAASC,QAAb,CAAsBP,YAAtB,CAA0DQ,oBAA1D,CAA9B,CAEA,GAAME,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,cAA0Bb,QAAQ,CAAC,CAAD,CAAlC,wCAAOc,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,KAAK,CAAGX,QAAQ,EAAtB,CAEA,GAAMY,CAAAA,YAAY,CAAGhB,WAAW,sEAAC,mNAEPO,CAAAA,oBAAoB,CAACU,OAArB,CAA6BC,WAA7B,GAA2CC,IAA3C,EAFO,QAEvBC,OAFuB,kBAGxB,GAAInB,CAAAA,SAAJ,CAAcmB,OAAO,CAACC,SAAtB,EAAiCC,EAAjC,CAAoC,GAAIrB,CAAAA,SAAJ,CAAc,CAAd,CAApC,CAHwB,0BAIrBsB,SAJqB,CAIT,GAAItB,CAAAA,SAAJ,CAAcmB,OAAO,CAACI,SAAtB,EAAiCC,GAAjC,CAAqCL,OAAO,CAACC,SAA7C,EAAwDK,KAAxD,CAA8D,IAA9D,CAJS,uBAKJf,CAAAA,qBAAqB,CAACM,OAAtB,CAA8BC,WAA9B,GAA4CC,IAA5C,EALI,QAKrBQ,QALqB,eAM3B,GAAI,CAAC,GAAI1B,CAAAA,SAAJ,CAAc0B,QAAQ,CAACN,SAAvB,EAAkCC,EAAlC,CAAqC,GAAIrB,CAAAA,SAAJ,CAAc,CAAd,CAArC,CAAL,CAA6D,CAErD2B,UAFqD,CAExC,GAAI3B,CAAAA,SAAJ,CAAc0B,QAAQ,CAACH,SAAvB,EAAkCC,GAAlC,CAAsCE,QAAQ,CAACN,SAA/C,EAA0DK,KAA1D,CAAgEH,SAAhE,CAFwC,CAG3D,GAAI,CAACA,SAAS,CAACM,SAAV,CAAoBhB,KAApB,CAAL,CAAiC,CAC/BC,QAAQ,CAACS,SAAS,CAACO,QAAV,EAAD,CAAR,CACD,CACF,CAZ0B,yFAe7BhB,QAAQ,CAAC,CAAD,CAAR,CAf6B,qEAAD,GAiB7B,CAACD,KAAD,CAjB6B,CAAhC,CAmBAf,SAAS,CAAC,UAAM,CACd,GAAIS,oBAAoB,EAAII,qBAA5B,CAAmD,CACjDK,YAAY,GACb,CACF,CAJQ,CAIN,CAACF,QAAD,CAAWE,YAAX,CAAyBD,KAAzB,CAJM,CAAT,CAMA,MAAOF,CAAAA,KAAP,CACD,CA9BD,CAgCA,cAAeD,CAAAA,YAAf","sourcesContent":["import { useEffect, useState, useCallback } from 'react'\nimport { AbiItem } from 'web3-utils'\nimport BigNumber from 'bignumber.js'\nimport SolarV2LPABI from '../constants/abis/SolarV2LP.json'\nimport { getWeb3NoAccount } from '../utils/web3'\nimport useBlock from './useBlocks'\n\nconst web3 = getWeb3NoAccount()\nconst AvaxUSDTPairAddress = '0x3fb0087842b7ebd57be8024aaf32cc6a390c13d5'\nconst AvaxUsdtPairContract = new web3.eth.Contract(SolarV2LPABI as unknown as AbiItem, AvaxUSDTPairAddress)\n\nconst SolarAvaxPairAddress = '0x3fb0087842b7ebd57be8024aaf32cc6a390c13d5'\nconst SolarAvaxPairContract = new web3.eth.Contract(SolarV2LPABI as unknown as AbiItem, SolarAvaxPairAddress)\n\nconst useAvaxPrice = () => {\n  const [price, setPrice] = useState(0)\n  const block = useBlock()\n\n  const fetchBalance = useCallback(async () => {\n    try {\n      const avaxObj = await AvaxUsdtPairContract.methods.getReserves().call();\n      if (!new BigNumber(avaxObj._reserve1).eq(new BigNumber(0))) {\n        const avaxPrice = new BigNumber(avaxObj._reserve0).div(avaxObj._reserve1).times(1e12)\n        const solarObj = await SolarAvaxPairContract.methods.getReserves().call();\n        if (!new BigNumber(solarObj._reserve1).eq(new BigNumber(0))) {\n          \n          const solarPrice = new BigNumber(solarObj._reserve0).div(solarObj._reserve1).times(avaxPrice)\n          if (!avaxPrice.isEqualTo(price)) {\n            setPrice(avaxPrice.toNumber())\n          }\n        }\n      }\n    } catch (e) {\n      setPrice(0)\n     }\n  }, [price])\n\n  useEffect(() => {\n    if (AvaxUsdtPairContract && SolarAvaxPairContract) {\n      fetchBalance()\n    }\n  }, [setPrice, fetchBalance, block])\n\n  return price\n}\n\nexport default useAvaxPrice"]},"metadata":{},"sourceType":"module"}